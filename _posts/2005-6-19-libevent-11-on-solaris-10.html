---
layout: post
title: "libevent 1.1 on Solaris 10"
---
<p>
    If you're trying to build <a href="http://www.monkey.org/~provos/libevent/">libevent 1.1a</a> on <a href="http://opensolaris.org/">Solaris 10</a>, you will run into a few problems:
    </p>
    <p>
    <a name="step-1">Step 1)</a> <tt>gcc</tt> 3.4 is installed but not in your <tt>$PATH</tt>. Fix this by adding <tt>/usr/sfw/bin</tt> to your <tt>$PATH</tt>
    </p>
    <p>
    <a name="step-2">Step 2)</a> The <tt>Makefile</tt> generated by <tt>autoconf</tt> is hardcoded to use <tt>make</tt>. Just edit it and set the <tt>MAKE</tt> variable to <tt>gmake</tt>.
    </p>
    <a name="step-3">Step 3)</a> The link step will fail with the following error:
    </p>
    <pre>
    false cru .libs/libevent.a  event.o buffer.o evbuffer.o log.o select.o poll.o devpoll.o signal.o
    gmake[2]: *** [libevent.la] Error 1
    </pre>
    <p>
    You will shake your head and ask <em>wtf?</em> What's happened is that <tt>ar</tt> can't be found and so the value <tt>false</tt> has been put in it's place. You can tell this happened by looking at the <tt>configure</tt> output. The offending line is:
    <pre>
    checking for ar... false
    </pre>
    </p>
    <p>
    d'oh!
    </p>
    <p>
    Answer: add <tt>/usr/ccs/bin</tt> to your $PATH and re-run <tt>configure</tt>. Actually, if you had added this to your $PATH initially, you could've skipped <a href="#step-2">Step 2</a>. Both make and ar would have been found.
    </p>
    <p>
    If I was smart enough, I would send some patches in. Things seem to work otherwise, I'm currently running <a href="http://plb.sunsite.dk/">plb</a> successfully.
    </p>
    <p>
    Oh yeah, so I'm running Solaris 10 on a Thinkpad A31p and I'm impressed that it recognized my video card and I could configure it to display at 1600x1200x32 without editing a single freaking config file. I wrote a small C++ program with a few subtle flaws to exercise <a href="http://www.sun.com/bigadmin/content/dtrace/">dtrace</a> but sofar my bugs aren't complicated enough to warrant dtrace; gdb would've done fine. We'll see.
    </p>
    <p>
    Hey Solaris gurus, what do you use in Solaris that rivals <a href="http://www.xmailserver.org/linux-patches/epoll.txt">epoll</a> on Linux or <a href="http://www.madison-gurkha.com/publications/kqueue/">kqueue</a> on FreeBSD/OS X?
    </p>
